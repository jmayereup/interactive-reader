<!-- reader-template.html (Using Tailwind CSS) -->

<div class="container-wrapper p-4 relative">
    <div id="main-content" class="max-w-6xl mx-auto">
        <!-- Theme toggle in top right corner -->
        <div class="absolute top-4 right-4">
            <button id="theme-toggle-btn" class="control-btn rounded-full w-12 h-12 flex items-center justify-center transition">
                <svg id="theme-icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
                </svg>
                <svg id="theme-icon-moon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 hidden">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
                </svg>
            </button>
        </div>
        
        <header class="text-center mb-8">
            <h1 class="main-title text-2xl md:text-3xl font-bold mb-4" id="main-title"></h1>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
                <div class="card rounded-lg p-6">
                    <div class="text-center mb-4 text-gray-600">
                        Click any underlined word to hear it, see its translation, and add it to your list.
                    </div>
                    
                    <!-- TTS Controls inside reading pane, smaller size -->
                    <div class="flex justify-center items-center gap-3 mb-6">
                        <button id="listen-btn" class="control-btn rounded-full w-10 h-10 flex items-center justify-center">
                            <svg id="listen-icon-play" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 010 1.972l-11.54 6.347a1.125 1.125 0 01-1.667-.986V5.653z" />
                            </svg>
                            <svg id="listen-icon-stop" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 hidden">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z" />
                            </svg>
                        </button>
                        <button id="pause-btn" class="control-btn rounded-full w-10 h-10 flex items-center justify-center" disabled>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25v13.5m-7.5-13.5v13.5" />
                            </svg>
                        </button>
                        <button id="slow-btn" class="control-btn rounded-full w-10 h-10 flex items-center justify-center" disabled>
                            <svg id="turtle-icon" fill="currentColor" version="1.2" baseProfile="tiny" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 175" class="w-6 h-6">
                                <path d="M185,29.7v0.2l15-12.6c-11.4-6.1-23.9-9.5-37.5-9.5s-26.2,3.4-37.1,9.3l15,12.6L185,29.7L185,29.7z M105.1,93.2 c-24.7,0-45,20.3-45,45v4.5l0,0c0.2,9.5,7.9,17,17.4,17s17.2-7.5,17.4-17l0,0v-4.5c0-5.7,4.5-10.1,10.1-10.1 c9.7,0,17.6-7.9,17.6-17.6S114.8,93.2,105.1,93.2z M221.9,92.8c-9.7,0-17.6,7.9-17.6,17.6v32.4l0,0c0.4,9.3,7.9,16.8,17.4,16.8 s17-7.5,17.4-16.8l0,0v-32.7C239.3,100.5,231.4,92.8,221.9,92.8z M252.7,101.9c0-4.3-1.4-8.5-3.4-12c-2.2,1.6-4.7,2.6-7.7,2.6 c4.1,4.9,6.5,11,6.5,17.6v5.5C251.3,111.8,252.7,107,252.7,101.9z M131.7,110.6c0,5.7-1.8,10.7-4.7,15c11.6,2.6,23.5,4.1,35.7,4.1 c11.4,0,22.1-1.2,32.7-3.4v-16c0-6.5,2.4-12.6,6.3-17h-76.5C129,98,131.7,103.9,131.7,110.6z M125,93.4L125,93.4c0.2,0,0-0.2,0-0.2 V93.4z M245.8,79.6c0-2.4-2-4.7-4.5-4.7h-0.6c-3.4-21.7-15.4-40.6-32.7-52.5l-17.6,14.8c9.7,11.4,16.4,24.1,20.3,37.9h-9.5 c-4.3-13-11.4-25.6-21.5-35.9h-32.9c-10.1,10.5-17,22.7-21.5,35.9h-9.5c3.9-13.4,10.3-26,19.9-36.9l-18.5-15.6 c-17,12.2-29.4,30.8-32.7,52.5h-1.2c-2.4,0-4.5,2-4.5,4.5c0,2.4,2,4.5,4.5,4.5h157.8C243.8,84.1,245.8,82,245.8,79.6z M81.6,89.5 c-4.9-0.6-8.9-4.7-8.9-9.9v-8.9c0-18.7-15-33.9-33.9-33.9c-18.7,0-33.9,15-33.9,33.9v8.9c0,4.9,4.1,8.9,8.9,8.9h24.5 c2.2,11.4,8.5,20.7,17.6,27.4C61.1,104.3,70.2,95.2,81.6,89.5z M24.2,64.4c-3,0-5.7-2.4-5.7-5.7c0-3,2.4-5.7,5.7-5.7 s5.7,2.4,5.7,5.7C29.8,61.9,27.4,64.4,24.2,64.4z"/>
                            </svg>
                        </button>
                    </div>
                    
                    <div id="reading-pane" class="prose text-xl font-light leading-relaxed max-h-100vh overflow-y-auto pr-2">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="lg:col-span-1">
                <div class="card rounded-lg p-6 h-full flex flex-col">
                    <div class="flex-grow">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold">My Word List</h2>
                            <div id="word-count-selector" class="w-24 hidden">
                                <select id="word-count" class="w-full p-2 rounded-md text-sm">
                                    <option value="10">10</option>
                                    <option value="20" selected>20</option>
                                    <option value="30">30</option>
                                    <option value="50">50</option>
                                    <option value="all">All</option>
                                </select>
                            </div>
                        </div>
                        
                        <div id="word-list" class="space-y-2 max-h-45vh overflow-y-auto pr-2">
                            <p id="word-list-placeholder" class="text-gray-500">Words you save will appear here.</p>
                        </div>
                    </div>
                    
                    <div class="mt-4 pt-6 border-t border-gray-200">
                        <h2 class="text-xl font-bold mb-4">Activities & Export</h2>
                        <div id="activities-section" class="space-y-2">
                            <button id="quiz-btn" class="button button-primary rounded-lg py-2 px-4 w-full" disabled>
                                Multiple Choice Quiz
                            </button>
                            <button id="matching-game-btn" class="button button-secondary rounded-lg py-2 px-4 w-full" disabled>
                                Memory Game
                            </button>
                            <button id="export-btn" class="button button-slate rounded-lg py-2 px-4 w-full flex items-center justify-center gap-2" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                </svg>
                                Copy Vocab
                            </button>
                            <p id="activities-helper" class="text-sm text-center text-gray-500">
                                Add at least 4 words for activities.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Translation Snackbar -->
<div id="translation-popup" class="hidden fixed bottom-0 left-0 right-0 z-50 transform translate-y-full transition-transform duration-300 ease-out">
    <div class="absolute inset-0 bg-black bg-opacity-20 backdrop-blur-sm"></div>
    <div class="relative bg-white dark:bg-gray-800 shadow-2xl border-t border-gray-200 dark:border-gray-700">
        <!-- Snackbar content is generated by JS -->
    </div>
</div>

<!-- Activity Modal -->
<div id="activity-modal" class="hidden fixed inset-0 z-40">
    <div id="main-content" class="h-full flex flex-col p-4">
        <header id="activity-modal-header" class="flex justify-between items-center mb-6">
            <h2 id="activity-title" class="text-3xl font-bold">Activity</h2>
            <button id="close-activity-btn" class="text-4xl font-light text-gray-500">&times;</button>
        </header>
        <div id="activity-content" class="flex-grow flex flex-col items-center justify-center rounded-lg p-6">
            <!-- Activity content (quiz, game) is generated by JS -->
        </div>
    </div>
</div>